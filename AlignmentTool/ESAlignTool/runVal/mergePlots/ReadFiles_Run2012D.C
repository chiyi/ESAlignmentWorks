#include "TROOT.h"
#include "TH1D.h"
#include "TFile.h"

void ReadFiles_Run2012D()
{
 TH1D *ESpF_residualX_ALLA=new TH1D("ESpF_residualX_ALLA","",300,-15,15);
 TH1D *ESpR_residualY_ALLA=new TH1D("ESpR_residualY_ALLA","",300,-15,15);
 TH1D *ESmF_residualX_ALLA=new TH1D("ESmF_residualX_ALLA","",300,-15,15);
 TH1D *ESmR_residualY_ALLA=new TH1D("ESmR_residualY_ALLA","",300,-15,15);

 TFile *f[2000];
 int ind=0;

 ind=1;
 f[ind-1]=TFile::Open("root://eoscms//eos/cms/store/group/alca_ecalcalib/ESalignment/5_3_6/Run2012D_Validation/AlignmentFile_iter1_p1.root");
 ESpF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESpF_residualX"));
 ESpR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESpR_residualY"));
 ESmF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESmF_residualX"));
 ESmR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESmR_residualY"));
 f[ind-1]->Close();
 ind=2;
 f[ind-1]=TFile::Open("root://eoscms//eos/cms/store/group/alca_ecalcalib/ESalignment/5_3_6/Run2012D_Validation/AlignmentFile_iter1_p10.root");
 ESpF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESpF_residualX"));
 ESpR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESpR_residualY"));
 ESmF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESmF_residualX"));
 ESmR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESmR_residualY"));
 f[ind-1]->Close();
 ind=3;
 f[ind-1]=TFile::Open("root://eoscms//eos/cms/store/group/alca_ecalcalib/ESalignment/5_3_6/Run2012D_Validation/AlignmentFile_iter1_p11.root");
 ESpF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESpF_residualX"));
 ESpR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESpR_residualY"));
 ESmF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESmF_residualX"));
 ESmR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESmR_residualY"));
 f[ind-1]->Close();
 ind=4;
 f[ind-1]=TFile::Open("root://eoscms//eos/cms/store/group/alca_ecalcalib/ESalignment/5_3_6/Run2012D_Validation/AlignmentFile_iter1_p12.root");
 ESpF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESpF_residualX"));
 ESpR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESpR_residualY"));
 ESmF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESmF_residualX"));
 ESmR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESmR_residualY"));
 f[ind-1]->Close();
 ind=5;
 f[ind-1]=TFile::Open("root://eoscms//eos/cms/store/group/alca_ecalcalib/ESalignment/5_3_6/Run2012D_Validation/AlignmentFile_iter1_p14.root");
 ESpF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESpF_residualX"));
 ESpR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESpR_residualY"));
 ESmF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESmF_residualX"));
 ESmR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESmR_residualY"));
 f[ind-1]->Close();
 ind=6;
 f[ind-1]=TFile::Open("root://eoscms//eos/cms/store/group/alca_ecalcalib/ESalignment/5_3_6/Run2012D_Validation/AlignmentFile_iter1_p15.root");
 ESpF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESpF_residualX"));
 ESpR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESpR_residualY"));
 ESmF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESmF_residualX"));
 ESmR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESmR_residualY"));
 f[ind-1]->Close();
 ind=7;
 f[ind-1]=TFile::Open("root://eoscms//eos/cms/store/group/alca_ecalcalib/ESalignment/5_3_6/Run2012D_Validation/AlignmentFile_iter1_p17.root");
 ESpF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESpF_residualX"));
 ESpR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESpR_residualY"));
 ESmF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESmF_residualX"));
 ESmR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESmR_residualY"));
 f[ind-1]->Close();
 ind=8;
 f[ind-1]=TFile::Open("root://eoscms//eos/cms/store/group/alca_ecalcalib/ESalignment/5_3_6/Run2012D_Validation/AlignmentFile_iter1_p18.root");
 ESpF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESpF_residualX"));
 ESpR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESpR_residualY"));
 ESmF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESmF_residualX"));
 ESmR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESmR_residualY"));
 f[ind-1]->Close();
 ind=9;
 f[ind-1]=TFile::Open("root://eoscms//eos/cms/store/group/alca_ecalcalib/ESalignment/5_3_6/Run2012D_Validation/AlignmentFile_iter1_p19.root");
 ESpF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESpF_residualX"));
 ESpR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESpR_residualY"));
 ESmF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESmF_residualX"));
 ESmR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESmR_residualY"));
 f[ind-1]->Close();
 ind=10;
 f[ind-1]=TFile::Open("root://eoscms//eos/cms/store/group/alca_ecalcalib/ESalignment/5_3_6/Run2012D_Validation/AlignmentFile_iter1_p2.root");
 ESpF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESpF_residualX"));
 ESpR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESpR_residualY"));
 ESmF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESmF_residualX"));
 ESmR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESmR_residualY"));
 f[ind-1]->Close();
 ind=11;
 f[ind-1]=TFile::Open("root://eoscms//eos/cms/store/group/alca_ecalcalib/ESalignment/5_3_6/Run2012D_Validation/AlignmentFile_iter1_p20.root");
 ESpF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESpF_residualX"));
 ESpR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESpR_residualY"));
 ESmF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESmF_residualX"));
 ESmR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESmR_residualY"));
 f[ind-1]->Close();
 ind=12;
 f[ind-1]=TFile::Open("root://eoscms//eos/cms/store/group/alca_ecalcalib/ESalignment/5_3_6/Run2012D_Validation/AlignmentFile_iter1_p21.root");
 ESpF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESpF_residualX"));
 ESpR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESpR_residualY"));
 ESmF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESmF_residualX"));
 ESmR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESmR_residualY"));
 f[ind-1]->Close();
 ind=13;
 f[ind-1]=TFile::Open("root://eoscms//eos/cms/store/group/alca_ecalcalib/ESalignment/5_3_6/Run2012D_Validation/AlignmentFile_iter1_p22.root");
 ESpF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESpF_residualX"));
 ESpR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESpR_residualY"));
 ESmF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESmF_residualX"));
 ESmR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESmR_residualY"));
 f[ind-1]->Close();
 ind=14;
 f[ind-1]=TFile::Open("root://eoscms//eos/cms/store/group/alca_ecalcalib/ESalignment/5_3_6/Run2012D_Validation/AlignmentFile_iter1_p3.root");
 ESpF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESpF_residualX"));
 ESpR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESpR_residualY"));
 ESmF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESmF_residualX"));
 ESmR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESmR_residualY"));
 f[ind-1]->Close();
 ind=15;
 f[ind-1]=TFile::Open("root://eoscms//eos/cms/store/group/alca_ecalcalib/ESalignment/5_3_6/Run2012D_Validation/AlignmentFile_iter1_p4.root");
 ESpF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESpF_residualX"));
 ESpR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESpR_residualY"));
 ESmF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESmF_residualX"));
 ESmR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESmR_residualY"));
 f[ind-1]->Close();
 ind=16;
 f[ind-1]=TFile::Open("root://eoscms//eos/cms/store/group/alca_ecalcalib/ESalignment/5_3_6/Run2012D_Validation/AlignmentFile_iter1_p5.root");
 ESpF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESpF_residualX"));
 ESpR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESpR_residualY"));
 ESmF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESmF_residualX"));
 ESmR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESmR_residualY"));
 f[ind-1]->Close();
 ind=17;
 f[ind-1]=TFile::Open("root://eoscms//eos/cms/store/group/alca_ecalcalib/ESalignment/5_3_6/Run2012D_Validation/AlignmentFile_iter1_p6.root");
 ESpF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESpF_residualX"));
 ESpR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESpR_residualY"));
 ESmF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESmF_residualX"));
 ESmR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESmR_residualY"));
 f[ind-1]->Close();
 ind=18;
 f[ind-1]=TFile::Open("root://eoscms//eos/cms/store/group/alca_ecalcalib/ESalignment/5_3_6/Run2012D_Validation/AlignmentFile_iter1_p7.root");
 ESpF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESpF_residualX"));
 ESpR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESpR_residualY"));
 ESmF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESmF_residualX"));
 ESmR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESmR_residualY"));
 f[ind-1]->Close();
 ind=19;
 f[ind-1]=TFile::Open("root://eoscms//eos/cms/store/group/alca_ecalcalib/ESalignment/5_3_6/Run2012D_Validation/AlignmentFile_iter1_p8.root");
 ESpF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESpF_residualX"));
 ESpR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESpR_residualY"));
 ESmF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESmF_residualX"));
 ESmR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESmR_residualY"));
 f[ind-1]->Close();
 ind=20;
 f[ind-1]=TFile::Open("root://eoscms//eos/cms/store/group/alca_ecalcalib/ESalignment/5_3_6/Run2012D_Validation/AlignmentFile_iter1_p9.root");
 ESpF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESpF_residualX"));
 ESpR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESpR_residualY"));
 ESmF_residualX_ALLA->Add((TH1D*)f[ind-1]->Get("ESmF_residualX"));
 ESmR_residualY_ALLA->Add((TH1D*)f[ind-1]->Get("ESmR_residualY"));
 f[ind-1]->Close();
//---Lower

 TFile *fw=new TFile("AddedPlots.root","RECREATE");
 fw->cd();
 ESpF_residualX_ALLA->Write();
 ESpR_residualY_ALLA->Write();
 ESmF_residualX_ALLA->Write();
 ESmR_residualY_ALLA->Write();
}
